<!DOCTYPE html>
<html>
<head>
<title>Generate Random Code</title>
</head>
<body>
<script>
function isMobileDevice() {
  return /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);
}

if (!isMobileDevice()) {
  window.location.replace("not-supported.html");
}
</script>

<h1>Generate Random Code</h1>
<p>Click the button to generate a random code.</p>
<input type="button" id="generateCode" value="Generate Code" />
<p>The code is: <span id="code"></span></p>
<script>
function generateCode() {
  // AJAX request to fetch codes from the server
  var xhr = new XMLHttpRequest();
  xhr.onreadystatechange = function() {
    if (xhr.readyState === 4 && xhr.status === 200) {
      var codes = xhr.responseText.split("-");
      var usedCodes = JSON.parse(sessionStorage.getItem("usedCodes")) || [];

      // Filter out used codes
      var availableCodes = codes.filter(function(code) {
        return !usedCodes.includes(code);
      });

      // Check if all codes have been used
      if (availableCodes.length === 0) {
        document.getElementById("code").innerHTML = "No codes available";
        return;
      }

      // Generate a random index to select a code
      var index = Math.floor(Math.random() * availableCodes.length);
      var code = availableCodes[index];

      // Set the code in the span element
      document.getElementById("code").innerHTML = code;

      // Add the code to the list of used codes
      usedCodes.push(code);
      sessionStorage.setItem("usedCodes", JSON.stringify(usedCodes));
    }
  };

  xhr.open("GET", "https://ikghd.site/hhh/icodersf.txt", true);
  xhr.send();
}

document.getElementById("generateCode").addEventListener("click", generateCode);
</script>
</body>
</html>
